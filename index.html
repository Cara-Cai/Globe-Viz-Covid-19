<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="//unpkg.com/d3"></script>
    <script src="//unpkg.com/globe.gl"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@<version>/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@<version>/examples/jsm/"
        }
      }
    </script>
    <meta charset="utf-8" />

  </head>
  <body>

    <div id="visualization-container">
      <div id="globeViz"></div>

      <div id="unshownData-container">
        <div class="modal-overlay"></div>
        <table class="table-col">
          <tr>
            <th>    </th>
            <th>Total Cases</th>
            <th>Total Deaths</th>
          </tr>
          <tr>
            <td>Andorra</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Antigua and Barbuda</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Bahrain</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Barbados</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Cabo Verde</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Comoros</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Dominica</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Grenada</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Holy See</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Kiribati</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Liechtenstein</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Maldives</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Malta</td>
            <td>0</td>
            <td>0</td>
          </tr>
            <td>Marshall Islands</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Mauritius</td>
            <td>0</td>
            <td>0</td>
          </tr>

        </table>
          
          <table class="table-col">
            <tr>
              <th>    </th>
              <th>Total Cases</th>
              <th>Total Deaths</th>
            </tr>
          <tr>
            <td>Micronesia</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Monaco</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Nauru</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Palau</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Saint Kitts and Nevis</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Saint Lucia</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Saint Vincent and the Grenadines</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Samoa</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>San Marino</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Sao Tome and Principe</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Seychelles</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Singapore</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Tonga</td>
            <td>0</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Tuvalu</td>
            <td>0</td>
            <td>0</td>
          </tr>
       </table>
      </div>

      <div id="slider-container">
        <span id="dateDisplay">2020-01-22</span>
        <input class="range" type="range" id="dateSlider" min="0" max="1142" value="0">
      </div>



      <button id="showTableBtn">Show Table</button>
      <button id="InfoBtn">Project Info</button>
      <div id="projectInfo">
        This project is a 3d Globe visualization of country-wide COVID-19 total cases and total deaths from 2020-01-22 to 2023-03-09.<br /><br />
        Considering the GPU capacity and performance of computers, some countries are not indicated on the globe.<br /><br />
        They are indicated in the table. <br /><br />
        The framework and geoJson file used are from <a href="https://globe.gl/" target="_blank">Globe GL</a>module.The dataset used is <a href="https://github.com/EP-Visual-Design/COVID-19-parsed-data/tree/main" target="_blank">parsed data</a> by John Henry Thompson, whose data source is <a href="https://github.com/CSSEGISandData/COVID-19" target="_blank">CSSE at Johns Hopkins University</a>.
        The project assets can be accessed xxx. <br /><br />
        For clarification, the height of the country polygons are mapped based on the total cases of the countries.<br /><br />
        This project is contributed to <a href="https://covid19impactproject.com/" target="_blank">The Covid Impact Project</a> by John Henry Thompson & Shindy Johnson.<br />

      </div>

    </div>


    <script type="module" src="sketch.js"></script>


    <script> // script for the show table button
    document.addEventListener('DOMContentLoaded', (event) => {
    document.getElementById('unshownData-container').style.display = 'none'; // Hide the table
    document.getElementById('showTableBtn').textContent = 'Show Table'; // Set button text to 'Show Table'
  });


  document.getElementById('showTableBtn').addEventListener('click', function() {
    var container = document.getElementById('unshownData-container');
    var overlay = document.querySelector('.modal-overlay');

    if (container.style.display === 'none' || container.style.display === '') {
        container.style.display = 'flex'; // Show the table
        this.textContent = 'Close Table'; // Change button text to 'Close Table'

        if (!overlay) {
            container.insertAdjacentHTML('beforeend', '<div class="modal-overlay"></div>');
        }
        overlay.style.display = 'block'; // Ensure the overlay is shown
    } else {
        container.style.display = 'none'; // Hide the table
        this.textContent = 'Show Table'; // Change button text to 'Show Table'
        if (overlay) {
            overlay.style.display = 'none'; // Hide the overlay
        }
    }
});

// document.addEventListener('click', function(event) {
//     var container = document.getElementById('unshownData-container');
//     var overlay = document.querySelector('.modal-overlay');
//     var btn = document.getElementById('showTableBtn');

//     // Close the table if the click is outside the container and not on the button
//     if (!container.contains(event.target) && event.target !== btn && container.style.display === 'flex') {
//         container.style.display = 'none';
//         if (overlay) {
//             overlay.style.display = 'none'; // Hide the overlay
//         }
//     }
// });

  </script>



  <script>//for the show project info
document.getElementById('projectInfo').style.display = 'none';

document.getElementById('InfoBtn').addEventListener('click', function() {
    var infoDiv = document.getElementById('projectInfo');
    // Toggle the display of the projectInfo div
    infoDiv.style.display = (infoDiv.style.display === 'none' || infoDiv.style.display === '') ? 'block' : 'none';
});

document.addEventListener('click', function(event) {
    var infoDiv = document.getElementById('projectInfo');
    var btn = document.getElementById('InfoBtn');
    // Close the infoDiv when clicking outside
    if (!infoDiv.contains(event.target) && !btn.contains(event.target) && infoDiv.style.display === 'block') {
        infoDiv.style.display = 'none';
    }
});


  </script>
  </body>
</html>
